# Проект 1. Приложение для анализа банковских операций

## Описание:
Приложение для анализа транзакций, которые находятся в Excel-файле. 
Приложение будет генерировать JSON-данные для веб-страниц, 
формировать Excel-отчеты, а также предоставлять другие сервисы.


## Требования к окружению:
python = "^3.12"
python-dotenv = "^1.0.1"
requests = "^2.32.3"
openpyxl = "^3.1.5"
pandas = "^2.2.3"
pytest = "^8.3.3"


## Установка:
1. Клонирование репозитория
```
git clone https://github.com/Alex-Lukichev/proj_1.git
```
2. Установка зависимостей
```
pip install -r requirements.txt
```
3. Тестирование

Модули для тестирования функций расположены в пакете tests. 
Имена тестирующих модулей и функций соответствуют тестируемым с добавлением приставки _test.



## Использование:
Функционал backend приложения для анализа транзакций.

### Модули:

#### Модуль main. 
Реализует главную функцию для веб-страницы «Главная». Генерирует JSON-ответ с данными:
 - транзакции по картам в текущем месяце; 
 - топ-5 транзакций по сумме платежа;
 - курс валют из предпочтений пользователя;
 - стоимость акций из S&P500 из предпочтений пользователя.

#### Модуль views. 
Реализует функции для страницы «Главная». Основные функции:
 - filter_df_by_date - фильтрует DataFrame по дате, возвращая данные за текущий месяц;
 - get_card_sum_cashback - подсчет общей суммы расходов и кешбэка по каждой карте;
 - get_topfive_transactions - топ-5 транзакций по сумме платежа.

#### Модуль utils. 
Реализует вспомогательные функции для страницы «Главная»: 
 - read_excel_file - читает данные из .xlsx файла и возвращает их в формате DataFrame;
 - get_currency_rate - получает курсы валют с apilayer.com;
 - get_stock_prices - получает стоимость акций с alphavantage.co.

#### Модуль services. 
Реализует функцию поиска транзакций с телефонными номерами в описании: 
 - get_transactions_with_phone_num - возвращает JSON со всеми транзакциями, содержащими в описании мобильные номера.

#### Модуль reports. 
Реализует отчет 'Траты по категории': 
 - spending_by_category - возвращает траты по заданной категории за последние три месяца (от переданной даты);
 - save_report_to_file_no_filename_input - декоратор для сохранения отчета в файл 
с автоматически сгенерированным именем;
 - save_report_to_file_with_filename_input - параметризуемый декоратор для сохранения отчета в файл, 
получает на вход имя файла.


## Документация:
Для получения дополнительной информации обратитесь к [документации](README.md) (в разработке).

## Лицензия:
Этот проект лицензирован по... (в разработке).

